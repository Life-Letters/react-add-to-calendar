!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("moment")):"function"==typeof define&&define.amd?define(["react","moment"],t):"object"==typeof exports?exports.ReactAddToCalendar=t(require("react"),require("moment")):e.ReactAddToCalendar=t(e.React,e.moment)}(this,function(t,n){return function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(t,n,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=o(1),p=a(u),d=o(2),c=a(d),f=new c.default,m=function(t){function n(e){r(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={optionsOpen:!1,isCrappyIE:!1},t.toggleCalendarDropdown=t.toggleCalendarDropdown.bind(t),t.handleDropdownLinkClick=t.handleDropdownLinkClick.bind(t),t}return s(n,t),i(n,[{key:"componentWillMount",value:function(){var e=!1;"undefined"!=typeof window&&window.navigator.msSaveOrOpenBlob&&window.Blob&&(e=!0),this.setState({isCrappyIE:e})}},{key:"toggleCalendarDropdown",value:function(){var e=!this.state.optionsOpen;e?document.addEventListener("click",this.toggleCalendarDropdown,!1):document.removeEventListener("click",this.toggleCalendarDropdown),this.setState({optionsOpen:e})}},{key:"handleDropdownLinkClick",value:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("href");if(!this.state.isCrappyIE||"ical-link"!==e.currentTarget.getAttribute("class")&&"outlook-calendar-link"!==e.currentTarget.getAttribute("class"))window.open(t,"_blank");else{var n=new Blob([t],{type:"text/calendar"});window.navigator.msSaveOrOpenBlob(n,"download.ics")}this.toggleCalendarDropdown()}},{key:"_directDownloadICS",value:function(){var t=f.buildUrl(this.props.event,"ICS",this.state.isCrappyIE);if(!this.state.isCrappyIE||"ical-link"!==e.currentTarget.getAttribute("class")&&"outlook-calendar-link"!==e.currentTarget.getAttribute("class"))window.open(t,"_blank");else{var n=new Blob([t],{type:"text/calendar"});window.navigator.msSaveOrOpenBlob(n,"download.ics")}}},{key:"renderDropdown",value:function(){var e=this,t=this.props.listItems.map(function(t){var n=Object.keys(t)[0],o=t[n],a=null;if(e.props.displayItemIcons){var r="outlook"===n?"windows":n;a=p.default.createElement("i",{className:"fa fa-"+r})}return p.default.createElement("li",{key:f.getRandomKey()},p.default.createElement("a",{className:n+"-link",onClick:e.handleDropdownLinkClick,href:f.buildUrl(e.props.event,n,e.state.isCrappyIE),target:"_blank"},a,o))});return p.default.createElement("div",{className:this.props.dropdownClass},p.default.createElement("ul",null,t))}},{key:"renderButton",value:function(){var e=this.props.buttonLabel,t=null,n=Object.keys(this.props.buttonTemplate);if("textOnly"!==n[0]){var o=this.props.buttonTemplate[n],a="react-add-to-calendar__icon--"+o+" fa fa-";a+="caret"===n[0]?this.state.optionsOpen?"caret-up":"caret-down":n[0],t=p.default.createElement("i",{className:a}),e="right"===o?p.default.createElement("span",null,e+" ",t):p.default.createElement("span",null,t," "+e)}var r=this.state.optionsOpen?this.props.buttonClassClosed+" "+this.props.buttonClassOpen:this.props.buttonClassClosed;return p.default.createElement("div",{className:this.props.buttonWrapperClass},p.default.createElement("a",{className:r,onClick:this._directDownloadICS.bind(this)},e))}},{key:"render",value:function(){var e=null;this.state.optionsOpen&&(e=this.renderDropdown());var t=null;return this.props.event&&(t=this.renderButton()),p.default.createElement("div",{className:this.props.rootClass},t,e)}}]),n}(p.default.Component);n.default=m,m.displayName="Add To Calendar",m.propTypes={buttonClassClosed:p.default.PropTypes.string,buttonClassOpen:p.default.PropTypes.string,buttonLabel:p.default.PropTypes.string,buttonTemplate:p.default.PropTypes.object,buttonWrapperClass:p.default.PropTypes.string,displayItemIcons:p.default.PropTypes.bool,dropdownClass:p.default.PropTypes.string,event:p.default.PropTypes.shape({title:p.default.PropTypes.string,description:p.default.PropTypes.string,location:p.default.PropTypes.string,startTime:p.default.PropTypes.string,endTime:p.default.PropTypes.string}).isRequired,listItems:p.default.PropTypes.arrayOf(p.default.PropTypes.object),rootClass:p.default.PropTypes.string},m.defaultProps={buttonClassClosed:"react-add-to-calendar__button",buttonClassOpen:"react-add-to-calendar__button--light",buttonLabel:"Add to My Calendar",buttonTemplate:{caret:"right"},buttonWrapperClass:"react-add-to-calendar__wrapper",displayItemIcons:!0,dropdownClass:"react-add-to-calendar__dropdown",event:{title:"Sample Event",description:"This is the sample event provided as an example only",location:"Portland, OR",startTime:"2016-09-16T20:15:00-04:00",endTime:"2016-09-16T21:45:00-04:00"},listItems:[{apple:"Apple Calendar"},{google:"Google"},{outlook:"Outlook"},{yahoo:"Yahoo"}],rootClass:"react-add-to-calendar"}},function(e,n){e.exports=t},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(3),s=o(l),i=function(){function e(){a(this,e)}return r(e,[{key:"getRandomKey",value:function(){var e=Math.floor(999999999999*Math.random()).toString();return(new Date).getTime().toString()+"_"+e}},{key:"formatTime",value:function(e){var t=s.default.utc(e).format("YYYYMMDDTHHmmssZ");return t.replace("+00:00","Z")}},{key:"calculateDuration",value:function(e,t){var n=s.default.utc(t).format("DD/MM/YYYY HH:mm:ss"),o=s.default.utc(e).format("DD/MM/YYYY HH:mm:ss"),a=(0,s.default)(n,"DD/MM/YYYY HH:mm:ss").diff((0,s.default)(o,"DD/MM/YYYY HH:mm:ss")),r=s.default.duration(a);return Math.floor(r.asHours())+s.default.utc(a).format(":mm")}},{key:"buildUrl",value:function(e,t,n){var o="";switch(t){case"google":o="https://www.google.com/calendar/event",o+="?action=TEMPLATE",o+="&text="+e.title,o+="&dates="+this.formatTime(e.startTime),o+="/"+this.formatTime(e.endTime),o+="&details="+e.description,o+="&location="+encodeURIComponent(e.location),o+="&sprop=&sprop=name:Alpha";break;case"yahoo":var a=this.calculateDuration(e.startTime,e.endTime);o="https://calendar.yahoo.com/?v=60&view=d&type=20",o+="&title="+e.title,o+="&st="+this.formatTime(e.startTime),o+="&dur="+a,o+="&desc="+e.description,o+="&in_loc="+encodeURIComponent(e.location);break;default:o=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+this.formatTime(e.startTime),"DTEND:"+this.formatTime(e.endTime),"SUMMARY:"+e.title,"DESCRIPTION:"+e.description,"LOCATION:"+e.location,"END:VEVENT","END:VCALENDAR"].join("\n"),n||(o=encodeURI("data:text/calendar;charset=utf8,"+o))}return o}}]),e}();t.default=i},function(e,t){e.exports=n}])});